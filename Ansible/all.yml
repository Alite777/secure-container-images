---
- name: k3s Setup
  tags:
    - k3s_setup
  hosts: k3s_servers
  vars:
    pip_install_packages:
      - name: docker
    k3s_build_cluster: true
  become: true
  roles:
    - k3s_setup

- name: k3s Startup
  tags:
    - k3s_startup
  hosts: control_plane
  become: true
  roles:
    - k3s_startup

- name: Helm Installation
  tags:
    - helm_installation
  hosts: control_plane
  become: true
  roles:
    - helm_installation

- name: Argo CD Setup
  tags:
    - argo_cd_setup
  hosts: control_plane
  become: true
  roles:
    - argo_cd_setup